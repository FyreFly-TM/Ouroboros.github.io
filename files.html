<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>File Types - Ouroboros</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav>
    <div class="nav-inner">
      <a href="index.html" class="brand"><img src="OuroborosLogo.png" alt="Ouroboros" class="logo"><span class="brand-text">Ouroboros</span></a>
      <div class="search-container">
        <div class="search-wrapper">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
          </svg>
          <input type="text" id="doc-search" class="search-input" placeholder="Search (Ctrl+K)" autocomplete="off" />
          <div id="search-results" class="search-results"></div>
        </div>
      </div>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <div class="nav-dropdown">
          <span class="nav-dropdown-trigger">Learn</span>
          <div class="nav-dropdown-menu">
            <a href="getting_started.html">Get Started</a>
            <a href="cheatsheet.html">Cheat Sheet</a>
            <a href="examples.html">Examples</a>
          </div>
        </div>
        <div class="nav-dropdown">
          <span class="nav-dropdown-trigger">Language</span>
          <div class="nav-dropdown-menu">
            <a href="arrows.html">Arrows</a>
            <a href="flows.html">Flows</a>
            <a href="tokens.html">Tokens</a>
            <div class="menu-divider"></div>
            <a href="reference.html">Full Reference</a>
          </div>
        </div>
        <div class="nav-dropdown">
          <span class="nav-dropdown-trigger">Libraries</span>
          <div class="nav-dropdown-menu">
            <a href="stdlib.html">Standard Library</a>
            <a href="windows.html">Windowing</a>
            <a href="keycodes.html">Key Codes</a>
            <div class="menu-divider"></div>
            <a href="domains.html">Domains</a>
            <a href="files.html">File Types</a>
          </div>
        </div>
        <div class="nav-dropdown">
          <span class="nav-dropdown-trigger">Tools</span>
          <div class="nav-dropdown-menu">
            <a href="rex_aot.html">REX &amp; AOT</a>
            <a href="downloads.html">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="doc-layout">
    <aside class="doc-panel toc">
      <h3>File Types</h3>
      <ul>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#ouro">.ouro Scripts</a></li>
        <li><a href="#var">.var Variables</a></li>
        <li><a href="#comp">.comp Components</a></li>
        <li><a href="#ent">.ent Entities</a></li>
        <li><a href="#structure">Project Structure</a></li>
      </ul>
    </aside>

    <main class="doc-panel doc-content">
      <div class="doc-header">
        <div class="badge">Project Organization</div>
        <h1>File Types</h1>
        <p>Ouroboros uses different file extensions to separate executable logic from type definitions.</p>
      </div>

      <div class="doc-section" id="overview">
        <h2>Overview</h2>
        <p>Ouroboros projects can use four file types:</p>
        <table class="table">
          <thead>
            <tr><th>Extension</th><th>Purpose</th><th>Contains</th></tr>
          </thead>
          <tbody>
            <tr><td><code>.ouro</code></td><td>Executable scripts</td><td>Flows, logic, arrows, control flow</td></tr>
            <tr><td><code>.var</code></td><td>Variable definitions</td><td>Data type prototypes with fields</td></tr>
            <tr><td><code>.comp</code></td><td>Component definitions</td><td>Reusable field collections</td></tr>
            <tr><td><code>.ent</code></td><td>Entity definitions</td><td>Component aggregates and templates</td></tr>
          </tbody>
        </table>
      </div>

      <div class="doc-section" id="ouro">
        <h2>.ouro Scripts</h2>
        <p>The main executable files. Contains flows, logic, and arrow expressions.</p>
        
        <div class="code-block">// COMPLETE EXAMPLE: Basic .ouro Script
// Save as: game_demo.ouro

"=== .ouro Script Demo ==="  -> Print

// Define flows for game mechanics
Flow CalculateDamage(attackPower, armorValue)
    damage := attackPower - armorValue
    if damage < 0
        damage = 0
    return damage

Flow ApplyDamage(health, damage)
    newHealth := health - damage
    if newHealth < 0
        newHealth = 0
    return newHealth

Flow Heal(health, amount, maxHealth)
    newHealth := health + amount
    if newHealth > maxHealth
        newHealth = maxHealth
    return newHealth

// Game simulation
"--- Combat Simulation ---" -> Print

playerHealth := 100
playerPower := 25
enemyHealth := 80
enemyArmor := 5

"Player Health: " + playerHealth -> Print
"Enemy Health: " + enemyHealth -> Print

"" -> Print
"Player attacks!" -> Print
damage := CalculateDamage(playerPower, enemyArmor)
"Damage dealt: " + damage -> Print
enemyHealth := ApplyDamage(enemyHealth, damage)
"Enemy health remaining: " + enemyHealth -> Print

"" -> Print
"Enemy attacks! (power: 15)" -> Print
damage = CalculateDamage(15, 0)
playerHealth := ApplyDamage(playerHealth, damage)
"Player health remaining: " + playerHealth -> Print

"" -> Print
"Player heals!" -> Print
playerHealth := Heal(playerHealth, 30, 100)
"Player health after heal: " + playerHealth -> Print

// Expected Output:
// === .ouro Script Demo ===
// --- Combat Simulation ---
// Player Health: 100.00
// Enemy Health: 80.00
//
// Player attacks!
// Damage dealt: 20.00
// Enemy health remaining: 60.00
//
// Enemy attacks! (power: 15)
// Player health remaining: 85.00
//
// Player heals!
// Player health after heal: 100.00</div>
      </div>

      <div class="doc-section" id="var">
        <h2>.var Variable Definitions</h2>
        <p>Define data type prototypes with default values. Use <code>:=</code> for mutable fields and <code>=:</code> for immutable.</p>

        <div class="code-block">// types.var

Variable Vector3
    x := 0.0
    y := 0.0
    z := 0.0

Variable Color
    r := 255
    g := 255
    b := 255
    a := 255

Variable Stats
    health := 100
    maxHealth =: 100    // Immutable default
    stamina := 50
    strength := 10
    agility := 10</div>
      </div>

      <div class="doc-section" id="comp">
        <h2>.comp Component Definitions</h2>
        <p>Group related fields into reusable components. Components are building blocks for entities.</p>

        <div class="code-block">// components.comp

Component Transform
    Position := Vector3
    Rotation := Vector3
    Scale := Vector3

Component HealthBase
    CurrentHP := 100
    MaxHP := 100
    Regeneration := 0.5

Component Inventory
    Slots := 20
    WeightLimit := 100.0
    CurrentWeight := 0.0

Component AI
    BehaviorTree := "default"
    AgroRange := 10.0
    WanderRadius := 5.0</div>
      </div>

      <div class="doc-section" id="ent">
        <h2>.ent Entity Definitions</h2>
        <p>Compose entities by aggregating components. Templates provide reusable entity blueprints.</p>

        <div class="code-block">// entities.ent

Entity Player
    Transform
    HealthBase
    Inventory
    
Entity NPC
    Transform
    HealthBase
    AI
    Inventory

Entity Prop
    Transform

// Templates are reusable patterns
Template Boss
    Transform
    HealthBase
    AI

Template Vendor
    Transform
    Inventory</div>
      </div>

      <div class="doc-section" id="structure">
        <h2>Project Structure</h2>
        <p>Recommended organization for Ouroboros projects:</p>

        <div class="code-block">my_project/
├── types/
│   ├── vectors.var
│   ├── stats.var
│   └── colors.var
├── components/
│   ├── physics.comp
│   ├── health.comp
│   └── inventory.comp
├── entities/
│   ├── characters.ent
│   └── items.ent
├── scripts/
│   ├── main.ouro
│   ├── combat.ouro
│   └── inventory.ouro
└── README.md</div>

        <h3>Preloading Behavior</h3>
        <p>The Chimera Compiler automatically preloads type definitions from the working directory and parent directories. This means:</p>
        <ul class="list">
          <li>Place shared types at the project root</li>
          <li>Scripts in subfolders can access all preloaded types</li>
          <li>No explicit import statements needed</li>
        </ul>

        <h3>Best Practices</h3>
        <ul class="list">
          <li>Keep type definitions (.var, .comp, .ent) separate from logic (.ouro)</li>
          <li>Use immutable fields (<code>=:</code>) for constants and defaults</li>
          <li>Name files descriptively: <code>player_stats.var</code>, <code>combat_system.ouro</code></li>
          <li>Group related components in the same .comp file</li>
        </ul>
      </div>
    </main>
  </div>

  <footer>
    <p>Ouroboros Language © 2026</p>
  </footer>

  <script>
    // Add copy buttons to all code blocks
    document.addEventListener('DOMContentLoaded', function() {
      const codeBlocks = document.querySelectorAll('.code-block');
      
      codeBlocks.forEach((block, index) => {
        // Create wrapper
        const wrapper = document.createElement('div');
        wrapper.className = 'code-block-wrapper';
        block.parentNode.insertBefore(wrapper, block);
        wrapper.appendChild(block);
        
        // Create copy button
        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-btn';
        copyBtn.textContent = 'Copy';
        copyBtn.setAttribute('data-code-index', index);
        
        wrapper.appendChild(copyBtn);
        
        // Copy functionality
        copyBtn.addEventListener('click', function() {
          const code = block.textContent;
          navigator.clipboard.writeText(code).then(() => {
            // Show success state
            const originalText = copyBtn.textContent;
            copyBtn.textContent = 'Copied!';
            copyBtn.classList.add('copied');
            
            setTimeout(() => {
              copyBtn.textContent = originalText;
              copyBtn.classList.remove('copied');
            }, 2000);
          }).catch(err => {
            console.error('Failed to copy:', err);
            copyBtn.textContent = 'Failed';
            setTimeout(() => {
              copyBtn.textContent = 'Copy';
            }, 2000);
          });
        });
      });
    });
  </script>
  <script src="search.js"></script>
</body>
</html>
